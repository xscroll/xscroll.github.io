<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: plugins/infinite.js</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="Animate">
            <span class="title">
                <a href="Animate.html">Animate</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Animate.reset"><a href="Animate.html#reset">reset</a></li>
            
                <li data-name="Animate.run"><a href="Animate.html#run">run</a></li>
            
                <li data-name="Animate.stop"><a href="Animate.html#stop">stop</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Base">
            <span class="title">
                <a href="Base.html">Base</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Base.getPlugin"><a href="Base.html#getPlugin">getPlugin</a></li>
            
                <li data-name="Base.plug"><a href="Base.html#plug">plug</a></li>
            
                <li data-name="Base.unplug"><a href="Base.html#unplug">unplug</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Hammer">
            <span class="title">
                <a href="Hammer.html">Hammer</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Plugins">
            <span class="title">
                <a href="Plugins.html">Plugins</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Timer">
            <span class="title">
                <a href="Timer.html">Timer</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Util">
            <span class="title">
                <a href="Util.html">Util</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Util.getOffsetLeft"><a href="Util.html#getOffsetLeft">getOffsetLeft</a></li>
            
                <li data-name="Util.getOffsetTop"><a href="Util.html#getOffsetTop">getOffsetTop</a></li>
            
                <li data-name="Util.vendor"><a href="Util.html#vendor">vendor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Util.addClass"><a href="Util.html#addClass">addClass</a></li>
            
                <li data-name="Util.findParentEl"><a href="Util.html#findParentEl">findParentEl</a></li>
            
                <li data-name="Util.guid"><a href="Util.html#guid">guid</a></li>
            
                <li data-name="Util.hasClass"><a href="Util.html#hasClass">hasClass</a></li>
            
                <li data-name="Util.isAndroid"><a href="Util.html#isAndroid">isAndroid</a></li>
            
                <li data-name="Util.isBadAndroid"><a href="Util.html#isBadAndroid">isBadAndroid</a></li>
            
                <li data-name="Util.prefixStyle"><a href="Util.html#prefixStyle">prefixStyle</a></li>
            
                <li data-name="Util.remove"><a href="Util.html#remove">remove</a></li>
            
                <li data-name="Util.removeClass"><a href="Util.html#removeClass">removeClass</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Animate">
            <span class="title">
                <a href="Animate.html">Animate</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Animate.reset"><a href="Animate.html#reset">reset</a></li>
            
                <li data-name="Animate.run"><a href="Animate.html#run">run</a></li>
            
                <li data-name="Animate.stop"><a href="Animate.html#stop">stop</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Base">
            <span class="title">
                <a href="Base.html">Base</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Base.getPlugin"><a href="Base.html#getPlugin">getPlugin</a></li>
            
                <li data-name="Base.plug"><a href="Base.html#plug">plug</a></li>
            
                <li data-name="Base.unplug"><a href="Base.html#unplug">unplug</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Infinite">
            <span class="title">
                <a href="Infinite.html">Infinite</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Infinite.pluginId"><a href="Infinite.html#pluginId">pluginId</a></li>
            
                <li data-name="Infinite.sections"><a href="Infinite.html#sections">sections</a></li>
            
                <li data-name="Infinite.visibleElements"><a href="Infinite.html#visibleElements">visibleElements</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Infinite.append"><a href="Infinite.html#append">append</a></li>
            
                <li data-name="Infinite.get"><a href="Infinite.html#get">get</a></li>
            
                <li data-name="Infinite.getVisibleElements"><a href="Infinite.html#getVisibleElements">getVisibleElements</a></li>
            
                <li data-name="Infinite.insertAfter"><a href="Infinite.html#insertAfter">insertAfter</a></li>
            
                <li data-name="Infinite.insertBefore"><a href="Infinite.html#insertBefore">insertBefore</a></li>
            
                <li data-name="Infinite.pluginDestructor"><a href="Infinite.html#pluginDestructor">pluginDestructor</a></li>
            
                <li data-name="Infinite.pluginInitializer"><a href="Infinite.html#pluginInitializer">pluginInitializer</a></li>
            
                <li data-name="Infinite.remove"><a href="Infinite.html#remove">remove</a></li>
            
                <li data-name="Infinite.render"><a href="Infinite.html#render">render</a></li>
            
                <li data-name="Infinite.replace"><a href="Infinite.html#replace">replace</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li data-name="Infinite.event:pan"><a href="Infinite.html#event:pan">pan</a></li>
            
                <li data-name="Infinite.event:panend"><a href="Infinite.html#event:panend">panend</a></li>
            
                <li data-name="Infinite.event:panstart"><a href="Infinite.html#event:panstart">panstart</a></li>
            
                <li data-name="Infinite.event:tap"><a href="Infinite.html#event:tap">tap</a></li>
            
            </ul>
        </li>
    
        <li class="item" data-name="LazyLoad">
            <span class="title">
                <a href="LazyLoad.html">LazyLoad</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="LazyLoad.pluginId"><a href="LazyLoad.html#pluginId">pluginId</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="LazyLoad.pluginInitializer"><a href="LazyLoad.html#pluginInitializer">pluginInitializer</a></li>
            
                <li data-name="LazyLoad.reset"><a href="LazyLoad.html#reset">reset</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="OriginScroll">
            <span class="title">
                <a href="OriginScroll.html">OriginScroll</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="OriginScroll.getScrollLeft"><a href="OriginScroll.html#getScrollLeft">getScrollLeft</a></li>
            
                <li data-name="OriginScroll.getScrollTop"><a href="OriginScroll.html#getScrollTop">getScrollTop</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="PullDown">
            <span class="title">
                <a href="PullDown.html">PullDown</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="PullDown.pluginId"><a href="PullDown.html#pluginId">pluginId</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="PullDown.pluginDestructor"><a href="PullDown.html#pluginDestructor">pluginDestructor</a></li>
            
                <li data-name="PullDown.pluginInitializer"><a href="PullDown.html#pluginInitializer">pluginInitializer</a></li>
            
                <li data-name="PullDown.render"><a href="PullDown.html#render">render</a></li>
            
                <li data-name="PullDown.reset"><a href="PullDown.html#reset">reset</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="PullUp">
            <span class="title">
                <a href="PullUp.html">PullUp</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="PullUp.pluginId"><a href="PullUp.html#pluginId">pluginId</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="PullUp.complete"><a href="PullUp.html#complete">complete</a></li>
            
                <li data-name="PullUp.pluginDestructor"><a href="PullUp.html#pluginDestructor">pluginDestructor</a></li>
            
                <li data-name="PullUp.pluginInitializer"><a href="PullUp.html#pluginInitializer">pluginInitializer</a></li>
            
                <li data-name="PullUp.render"><a href="PullUp.html#render">render</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Scale">
            <span class="title">
                <a href="Scale.html">Scale</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Scale.pluginId"><a href="Scale.html#pluginId">pluginId</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Scale.pluginDestructor"><a href="Scale.html#pluginDestructor">pluginDestructor</a></li>
            
                <li data-name="Scale.pluginInitializer"><a href="Scale.html#pluginInitializer">pluginInitializer</a></li>
            
                <li data-name="Scale.scaleTo"><a href="Scale.html#scaleTo">scaleTo</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="SimuScroll">
            <span class="title">
                <a href="SimuScroll.html">SimuScroll</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="SimuScroll.boundryCheck"><a href="SimuScroll.html#boundryCheck">boundryCheck</a></li>
            
                <li data-name="SimuScroll.boundryCheckX"><a href="SimuScroll.html#boundryCheckX">boundryCheckX</a></li>
            
                <li data-name="SimuScroll.boundryCheckY"><a href="SimuScroll.html#boundryCheckY">boundryCheckY</a></li>
            
                <li data-name="SimuScroll.computeScroll"><a href="SimuScroll.html#computeScroll">computeScroll</a></li>
            
                <li data-name="SimuScroll.destroyScrollBars"><a href="SimuScroll.html#destroyScrollBars">destroyScrollBars</a></li>
            
                <li data-name="SimuScroll.getBoundryOutBottom"><a href="SimuScroll.html#getBoundryOutBottom">getBoundryOutBottom</a></li>
            
                <li data-name="SimuScroll.getBoundryOutLeft"><a href="SimuScroll.html#getBoundryOutLeft">getBoundryOutLeft</a></li>
            
                <li data-name="SimuScroll.getBoundryOutRight"><a href="SimuScroll.html#getBoundryOutRight">getBoundryOutRight</a></li>
            
                <li data-name="SimuScroll.getBoundryOutTop"><a href="SimuScroll.html#getBoundryOutTop">getBoundryOutTop</a></li>
            
                <li data-name="SimuScroll.getScrollLeft"><a href="SimuScroll.html#getScrollLeft">getScrollLeft</a></li>
            
                <li data-name="SimuScroll.getScrollTop"><a href="SimuScroll.html#getScrollTop">getScrollTop</a></li>
            
                <li data-name="SimuScroll.init"><a href="SimuScroll.html#init">init</a></li>
            
                <li data-name="SimuScroll.initController"><a href="SimuScroll.html#initController">initController</a></li>
            
                <li data-name="SimuScroll.initScrollBars"><a href="SimuScroll.html#initScrollBars">initScrollBars</a></li>
            
                <li data-name="SimuScroll.isBoundryOut"><a href="SimuScroll.html#isBoundryOut">isBoundryOut</a></li>
            
                <li data-name="SimuScroll.isBoundryOutBottom"><a href="SimuScroll.html#isBoundryOutBottom">isBoundryOutBottom</a></li>
            
                <li data-name="SimuScroll.isBoundryOutLeft"><a href="SimuScroll.html#isBoundryOutLeft">isBoundryOutLeft</a></li>
            
                <li data-name="SimuScroll.isBoundryOutRight"><a href="SimuScroll.html#isBoundryOutRight">isBoundryOutRight</a></li>
            
                <li data-name="SimuScroll.isBoundryOutTop"><a href="SimuScroll.html#isBoundryOutTop">isBoundryOutTop</a></li>
            
                <li data-name="SimuScroll.render"><a href="SimuScroll.html#render">render</a></li>
            
                <li data-name="SimuScroll.scrollLeft"><a href="SimuScroll.html#scrollLeft">scrollLeft</a></li>
            
                <li data-name="SimuScroll.scrollLeft"><a href="SimuScroll.html#scrollLeft">scrollLeft</a></li>
            
                <li data-name="SimuScroll.scrollTop"><a href="SimuScroll.html#scrollTop">scrollTop</a></li>
            
                <li data-name="SimuScroll.scrollTop"><a href="SimuScroll.html#scrollTop">scrollTop</a></li>
            
                <li data-name="SimuScroll.stop"><a href="SimuScroll.html#stop">stop</a></li>
            
                <li data-name="SimuScroll.translate"><a href="SimuScroll.html#translate">translate</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Snap">
            <span class="title">
                <a href="Snap.html">Snap</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Snap.pluginId"><a href="Snap.html#pluginId">pluginId</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Snap.pluginDestructor"><a href="Snap.html#pluginDestructor">pluginDestructor</a></li>
            
                <li data-name="Snap.pluginInitializer"><a href="Snap.html#pluginInitializer">pluginInitializer</a></li>
            
                <li data-name="Snap.render"><a href="Snap.html#render">render</a></li>
            
                <li data-name="Snap.snapTo"><a href="Snap.html#snapTo">snapTo</a></li>
            
                <li data-name="Snap.snapToCol"><a href="Snap.html#snapToCol">snapToCol</a></li>
            
                <li data-name="Snap.snapToRow"><a href="Snap.html#snapToRow">snapToRow</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="XScroll">
            <span class="title">
                <a href="XScroll.html">XScroll</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="XScroll.version"><a href="XScroll.html#version">version</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="XScroll.boundryCheck"><a href="XScroll.html#boundryCheck">boundryCheck</a></li>
            
                <li data-name="XScroll.boundryCheckX"><a href="XScroll.html#boundryCheckX">boundryCheckX</a></li>
            
                <li data-name="XScroll.boundryCheckY"><a href="XScroll.html#boundryCheckY">boundryCheckY</a></li>
            
                <li data-name="XScroll.destroy"><a href="XScroll.html#destroy">destroy</a></li>
            
                <li data-name="XScroll.disableGPUAcceleration"><a href="XScroll.html#disableGPUAcceleration">disableGPUAcceleration</a></li>
            
                <li data-name="XScroll.enableGPUAcceleration"><a href="XScroll.html#enableGPUAcceleration">enableGPUAcceleration</a></li>
            
                <li data-name="XScroll.getScrollLeft"><a href="XScroll.html#getScrollLeft">getScrollLeft</a></li>
            
                <li data-name="XScroll.getScrollPos"><a href="XScroll.html#getScrollPos">getScrollPos</a></li>
            
                <li data-name="XScroll.getScrollTop"><a href="XScroll.html#getScrollTop">getScrollTop</a></li>
            
                <li data-name="XScroll.init"><a href="XScroll.html#init">init</a></li>
            
                <li data-name="XScroll.initTouchAction"><a href="XScroll.html#initTouchAction">initTouchAction</a></li>
            
                <li data-name="XScroll.render"><a href="XScroll.html#render">render</a></li>
            
                <li data-name="XScroll.resetSize"><a href="XScroll.html#resetSize">resetSize</a></li>
            
                <li data-name="XScroll.scrollBy"><a href="XScroll.html#scrollBy">scrollBy</a></li>
            
                <li data-name="XScroll.scrollLeft"><a href="XScroll.html#scrollLeft">scrollLeft</a></li>
            
                <li data-name="XScroll.scrollLeftBy"><a href="XScroll.html#scrollLeftBy">scrollLeftBy</a></li>
            
                <li data-name="XScroll.scrollTo"><a href="XScroll.html#scrollTo">scrollTo</a></li>
            
                <li data-name="XScroll.scrollTop"><a href="XScroll.html#scrollTop">scrollTop</a></li>
            
                <li data-name="XScroll.scrollTopBy"><a href="XScroll.html#scrollTopBy">scrollTopBy</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="XScrollMaster">
            <span class="title">
                <a href="XScrollMaster.html">XScrollMaster</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="XScrollMaster.get"><a href="XScrollMaster.html#get">get</a></li>
            
                <li data-name="XScrollMaster.init"><a href="XScrollMaster.html#init">init</a></li>
            
                <li data-name="XScrollMaster.render"><a href="XScrollMaster.html#render">render</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="infinite.js.html">Source: plugins/infinite.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>"use strict";
var Util = require('../util'),
	Base = require('../base');

var transform = Util.prefixStyle("transform");
var transition = Util.prefixStyle("transition");

/**
 * An infinity dom-recycled list plugin for xscroll.
 * @constructor
 * @param {object} cfg
 * @param {string} cfg.transition recomposition cell with a transition
 * @param {string} cfg.infiniteElements dom-selector for reused elements
 * @param {function} cfg.renderHook render function for cell by per col or per row duration scrolling
 * @extends {Base}
 */
var Infinite = function(cfg) {
	Infinite.superclass.constructor.call(this, cfg);
	this.userConfig = Util.mix({
		transition: 'all 0.5s ease'
	}, cfg);
}

Util.extend(Infinite, Base, {
	/**
	 * a pluginId
	 * @memberOf Infinite
	 * @type {string}
	 */
	pluginId: "infinite",
	/**
	 * store the visible elements inside of view.
	 * @memberOf Infinite
	 * @type {object}
	 */
	visibleElements: {},
	/**
	 * store all elements data.
	 * @memberOf Infinite
	 * @type {object}
	 */
	sections: {},
	/**
	 * plugin initializer
	 * @memberOf Infinite
	 * @override Base
	 * @return {Infinite}
	 */
	pluginInitializer: function(xscroll) {
		var self = this;
		self.xscroll = xscroll;
		self.isY = !!(xscroll.userConfig.zoomType == "y");
		self._ = {
			_top:self.isY ? "_top" : "_left",
			_height:self.isY ? "_height" : "_width",
			top:self.isY ? "top" : "left",
			height:self.isY ? "height" : "width",
			width:self.isY ? "width" : "height",
			y:self.isY ? "y" : "x",
			translate:self.isY ? "translateY" : "translateX",
			containerHeight:self.isY ? "containerHeight" : "containerWidth",
			scrollTop:self.isY ? "scrollTop" : "scrollLeft",
		}
		self._initInfinite();
		xscroll.on("afterrender", function() {
			self.render();
			self._bindEvt();
		});
		return self;
	},
	/**
	 * detroy the plugin
	 * @memberOf Infinite
	 * @override Base
	 * @return {Infinite}
	 */
	pluginDestructor: function() {
		var self = this;
		var _ = self._;
		for (var i = 0; i &lt; self.infiniteLength; i++) {
			self.infiniteElements[i].style[_.top] = "auto";
			self.infiniteElements[i].style[transform] = "none";
			self.infiniteElements[i].style.visibility = "hidden";
		}
		self.xscroll && self.xscroll.off("scroll", self._updateByScroll, self);
		self.xscroll && self.xscroll.off("tap panstart pan panend", self._cellEventsHandler, self);
		return self;
	},
	_initInfinite: function() {
		var self = this;
		var xscroll = self.xscroll;
		var _ = self._;
		self.sections = {};
		self.infiniteElements = xscroll.renderTo.querySelectorAll(self.userConfig.infiniteElements);
		self.infiniteLength = self.infiniteElements.length;
		self.infiniteElementsCache = (function() {
			var tmp = []
			for (var i = 0; i &lt; self.infiniteLength; i++) {
				tmp.push({});
				self.infiniteElements[i].style.position = "absolute";
				self.infiniteElements[i].style[_.top] = 0;
				self.infiniteElements[i].style.visibility = "hidden";
				self.infiniteElements[i].style.display = "block";
				Util.addClass(self.infiniteElements[i], "_xs_infinite_elements_");
			}
			return tmp;
		})();
		self.elementsPos = {};
		return self;
	},
	_renderUnRecycledEl: function() {
		var self = this;
		var _ = self._;
		var translateZ = self.userConfig.gpuAcceleration ? " translateZ(0) " : "";
		for (var i in self.__serializedData) {
			var unrecycledEl = self.__serializedData[i];
			if (self.__serializedData[i]['recycled'] === false) {
				var el = unrecycledEl.id && document.getElementById(unrecycledEl.id.replace("#", "")) || document.createElement("div");
				var randomId = Util.guid("xs-row-");
				el.id = unrecycledEl.id || randomId;
				unrecycledEl.id = el.id;
				self.xscroll.content.appendChild(el);
				for (var attrName in unrecycledEl.style) {
					if (attrName != _.height && attrName != "display" && attrName != "position") {
						el.style[attrName] = unrecycledEl.style[attrName];
					}
				}
				el.style[_.top] = 0;
				el.style.position = "absolute";
				el.style.display = "block";
				el.style[_.height] = unrecycledEl[_._height] + "px";
				el.style[transform] = _.translate + "(" + unrecycledEl[_._top] + "px) " + translateZ;
				Util.addClass(el, unrecycledEl.className);
				self.userConfig.renderHook.call(self, el, unrecycledEl);
			}
		}
	},
	/**
	 * render or update the scroll contents
	 * @memberOf Infinite
	 * @return {Infinite}
	 */
	render: function() {
		var self = this;
		var _  = self._;
		var xscroll = self.xscroll;
		var offset = self.isY ? xscroll.getScrollTop() : xscroll.getScrollLeft();
		self.visibleElements = self.getVisibleElements(offset);
		self.__serializedData = self._computeDomPositions();
		xscroll.sticky && xscroll.sticky.render(true); //force render
		xscroll.fixed && xscroll.fixed.render();
		var size = xscroll[_.height];
		var containerSize = self._containerSize;
		if (containerSize &lt; size) {
			containerSize = size;
		}
		xscroll[_.containerHeight] = containerSize;
		xscroll.container.style[_.height] = containerSize + "px";
		xscroll.content.style[_.height] = containerSize + "px";
		self._renderUnRecycledEl();
		self._updateByScroll();
		self._updateByRender(offset);
		self.xscroll.boundryCheck();
		return self;
	},
	_getChangedRows: function(newElementsPos) {
		var self = this;
		var changedRows = {};
		for (var i in self.elementsPos) {
			if (!newElementsPos.hasOwnProperty(i)) {
				changedRows[i] = "delete";
			}
		}
		for (var i in newElementsPos) {
			if (newElementsPos[i].recycled && !self.elementsPos.hasOwnProperty(i)) {
				changedRows[i] = "add";
			}
		}
		self.elementsPos = newElementsPos;
		return changedRows;
	},
	_updateByScroll: function(e) {
		var self = this;
		var xscroll = self.xscroll;
		var _ = self._;
		var _pos = e && e[_.scrollTop];
		var pos = _pos === undefined ? (self.isY ? xscroll.getScrollTop() : xscroll.getScrollLeft()) : _pos;
		var elementsPos = self.getVisibleElements(pos);
		var changedRows = self.changedRows = self._getChangedRows(elementsPos);
		try{
			for (var i in changedRows) {
				if (changedRows[i] == "delete") {
					self._pushEl(i);
				}
				if (changedRows[i] == "add") {
					var elObj = self._popEl(elementsPos[i][self.guid]);
					var index = elObj.index;
					var el = elObj.el;
					if (el) {
						self.infiniteElementsCache[index].guid = elementsPos[i].guid;
						self.__serializedData[elementsPos[i].guid].__infiniteIndex = index;
						self._renderData(el, elementsPos[i]);
						self._renderStyle(el, elementsPos[i]);
					}
				}
			}
		}catch(e){
			console.warn('Not enough infiniteElements setted!');
		}
		return self;
	},
	_updateByRender: function(pos) {
		var self = this;
		var _ = self._;
		var xscroll = self.xscroll;
		var pos = pos === undefined ? (self.isY ? xscroll.getScrollTop() : xscroll.getScrollLeft()) : pos;
		var prevElementsPos = self.visibleElements;
		var newElementsPos = self.getVisibleElements(pos);
		var prevEl, newEl;
		//repaint
		for (var i in newElementsPos) {
			newEl = newElementsPos[i];
			for (var j in prevElementsPos) {
				prevEl = prevElementsPos[j];
				if (prevEl.guid === newEl.guid) {
					if (newEl.style != prevEl.style || newEl[_._top] != prevEl[_._top] || newEl[_._height] != prevEl[_._height]) {
						self._renderStyle(self.infiniteElements[newEl.__infiniteIndex], newEl, true);
					}
					if (JSON.stringify(newEl.data) != JSON.stringify(prevEl.data)) {
						self._renderData(self.infiniteElements[newEl.__infiniteIndex], newEl);
					}
				} else {
					// paint
					if (self.__serializedData[newEl.guid].recycled && self.__serializedData[newEl.guid].__infiniteIndex === undefined) {
						var elObj = self._popEl();
						self.__serializedData[newEl.guid].__infiniteIndex = elObj.index;
						self._renderData(elObj.el, newEl);
						self._renderStyle(elObj.el, newEl);
					}
				}
			}
		}
		self.visibleElements = newElementsPos;
	},
	/**
	 * get all element posInfo such as top,height,template,html
	 * @return {Array}
	 **/
	_computeDomPositions: function() {
		var self = this;
		var _ = self._;
		var pos = 0,
			size = 0,
			sections = self.sections,
			section;
		var data = [];
		var serializedData = {};
		for (var i in sections) {
			for (var j = 0, len = sections[i].length; j &lt; len; j++) {
				section = sections[i][j];
				section.sectionId = i;
				section.index = j;
				data.push(section);
			}
		}

		//f = v/itemSize*1000 &lt; 60 => v = 0.06 * itemSize
		self.userConfig.maxSpeed = 0.06 * 50;
		for (var i = 0, l = data.length; i &lt; l; i++) {
			var item = data[i];
			size = item.style && item.style[_.height] >= 0 && item.style.position != "fixed" ? item.style[_.height] : 0;
			item.guid = item.guid || Util.guid();
			item[_._top] = pos;
			item[_._height] = size;
			item.recycled = item.recycled === false ? false : true;
			pos += size;
			serializedData[item.guid] = item;
		}
		self._containerSize = pos;
		return serializedData;
	},
	/**
	 * get all elements inside of the view.
	 * @memberOf Infinite
	 * @param {number} pos scrollLeft or scrollTop
	 * @return {object} visibleElements
	 */
	getVisibleElements: function(pos) {
		var self = this;
		var xscroll = self.xscroll;
		var _ = self._;
		var pos = pos === undefined ? (self.isY ? xscroll.getScrollTop() : xscroll.getScrollLeft()) : pos;
		var threshold = self.userConfig.threshold >= 0 ? self.userConfig.threshold : xscroll[_.height] / 3;
		var tmp = {},
			item;
		var data = self.__serializedData;
		for (var i in data) {
			item = data[i];
			if (item[_._top] >= pos - threshold && item[_._top] &lt;= pos + xscroll[_.height] + threshold) {
				tmp[item.guid] = item;
			}
		}
		return JSON.parse(JSON.stringify(tmp));
	},
	_popEl: function() {
		var self = this;
		for (var i = 0; i &lt; self.infiniteLength; i++) {
			if (!self.infiniteElementsCache[i]._visible) {
				self.infiniteElementsCache[i]._visible = true;
				return {
					index: i,
					el: self.infiniteElements[i]
				}
			}
		}
	},
	_pushEl: function(guid) {
		var self = this;
		for (var i = 0; i &lt; self.infiniteLength; i++) {
			if (self.infiniteElementsCache[i].guid == guid) {
				self.infiniteElementsCache[i]._visible = false;
				self.infiniteElements[i].style.visibility = "hidden";
				self.infiniteElementsCache[i].guid = null;
			}
		}
	},
	_renderData: function(el, elementObj) {
		var self = this;
		if (!el || !elementObj || elementObj.style.position == "fixed") return;
		self.userConfig.renderHook.call(self, el, elementObj);
	},
	_renderStyle: function(el, elementObj, useTransition) {
		var self = this;
		var _ = self._;
		if (!el) return;
		var translateZ = self.xscroll.userConfig.gpuAcceleration ? " translateZ(0) " : "";
		//update style
		for (var attrName in elementObj.style) {
			if (attrName != _.height && attrName != "display" && attrName != "position") {
				el.style[attrName] = elementObj.style[attrName];
			}
		}
		el.setAttribute("xs-index", elementObj.index);
		el.setAttribute("xs-sectionid", elementObj.sectionId);
		el.setAttribute("xs-guid", elementObj.guid);
		el.style.visibility = "visible";
		el.style[_.height] = elementObj[_._height] + "px";
		el.style[transform] = _.translate + "(" + elementObj[_._top] + "px) " + translateZ;
		el.style[transition] = useTransition ? self.userConfig.transition : "none";
	},
	getCell: function(e) {
		var self = this,
			cell;
		var el = Util.findParentEl(e.target, "._xs_infinite_elements_", self.xscroll.renderTo);
		if(!el){
			el = Util.findParentEl(e.target, ".xs-sticky-handler", self.xscroll.renderTo);
		}
		var guid = el && el.getAttribute("xs-guid");
		if (undefined === guid) return;
		return {
			data:self.__serializedData[guid],
			el:el
		};
	},
	_bindEvt: function() {
		var self = this;
		if (self._isEvtBinded) return;
		self._isEvtBinded = true;
		self.xscroll.renderTo.addEventListener("webkitTransitionEnd", function(e) {
			if (e.target.className.match(/xs-row/)) {
				e.target.style.webkitTransition = "";
			}
		});
		self.xscroll.on("scroll", self._updateByScroll, self);
		self.xscroll.on("tap panstart pan panend", self._cellEventsHandler, self);
		return self;
	},
	_cellEventsHandler: function(e) {
		var self = this;
		var cell = self.getCell(e);
		e.cell = cell.data;
		e.cellEl = cell.el;
		e.cell && self[e.type].call(self, e);
	},
	/**
	 * tap event
	 * @memberOf Infinite
	 * @param {object} e events data include cell object
	 * @event
	 */
	tap: function(e) {
		this.trigger("tap", e);
		return this;
	},
	/**
	 * panstart event
	 * @memberOf Infinite
	 * @param {object} e events data include cell object
	 * @event
	 */
	panstart: function(e) {
		this.trigger("panstart", e);
		return this;
	},
	/**
	 * pan event
	 * @memberOf Infinite
	 * @param {object} e events data include cell object
	 * @event
	 */
	pan: function(e) {
		this.trigger("pan", e);
		return this;
	},
	/**
	 * panend event
	 * @memberOf Infinite
	 * @param {object} e events data include cell object
	 * @event
	 */
	panend: function(e) {
		this.trigger("panend", e);
		return this;
	},
	/**
	 * insert data before a position
	 * @memberOf Infinite
	 * @param {string} sectionId sectionId of the target cell
	 * @param {number} index index of the target cell
	 * @param {object} data data to insert
	 * @return {Infinite}
	 */
	insertBefore: function(sectionId, index, data) {
		var self = this;
		if (sectionId === undefined || index === undefined || data === undefined) return self;
		if (!self.sections[sectionId]) {
			self.sections[sectionId] = [];
		}
		self.sections[sectionId].splice(index, 0, data);
		return self;
	},
	/**
	 * insert data after a position
	 * @memberOf Infinite
	 * @param {string} sectionId sectionId of the target cell
	 * @param {number} index index of the target cell
	 * @param {object} data data to insert
	 * @return {Infinite}
	 */
	insertAfter: function(sectionId, index, data) {
		var self = this;
		if (sectionId === undefined || index === undefined || data === undefined) return self;
		if (!self.sections[sectionId]) {
			self.sections[sectionId] = [];
		}
		self.sections[sectionId].splice(Number(index) + 1, 0, data);
		return self;
	},
	/**
	 * append data after a section
	 * @memberOf Infinite
	 * @param {string} sectionId sectionId for the append cell
	 * @param {object} data data to append
	 * @return {Infinite}
	 */
	append: function(sectionId, data) {
		var self = this;
		if (!self.sections[sectionId]) {
			self.sections[sectionId] = [];
		}
		self.sections[sectionId] = self.sections[sectionId].concat(data);
		return self;
	},
	/**
	 * remove some data by sectionId,from,number
	 * @memberOf Infinite
	 * @param {string} sectionId sectionId for the append cell
	 * @param {number} from removed index from
	 * @param {number} number removed data number
	 * @return {Infinite}
	 */
	remove: function(sectionId, from, number) {
		var self = this;
		var number = number || 1;
		if (undefined === sectionId || !self.sections[sectionId]) return self;
		//remove a section
		if (undefined === from) {
			self.sections[sectionId] = null;
			return self;
		}
		//remove some data in section
		if (self.sections[sectionId] && self.sections[sectionId][from]) {
			self.sections[sectionId].splice(from, number);
			return self;
		}
		return self;
	},
	/**
	 * replace some data by sectionId and index
	 * @memberOf Infinite
	 * @param {string} sectionId sectionId to replace
	 * @param {number} index removed index from
	 * @param {object} data new data to replace
	 * @return {Infinite}
	 */
	replace: function(sectionId, index, data) {
		var self = this;
		if (undefined === sectionId || !self.sections[sectionId]) return self;
		self.sections[sectionId][index] = data;
		return self;
	},
	/**
	 * get data by sectionId and index
	 * @memberOf Infinite
	 * @param {string} sectionId sectionId
	 * @param {number} index index in the section
	 * @return {object} data data
	 */
	get: function(sectionId, index) {
		if (undefined === sectionId) return;
		if (undefined === index) return this.sections[sectionId];
		return this.sections[sectionId][index];
	}
});

if (typeof module == 'object' && module.exports) {
	module.exports = Infinite;
}
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Thu Oct 29 2015 16:47:25 GMT+0800 (CST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
