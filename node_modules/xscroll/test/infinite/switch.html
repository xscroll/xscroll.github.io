<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>simple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>
    <style type="text/css">

* {
    box-sizing: border-box;
    position: relative;
    margin : 0;
    padding : 0;
    border-style: solid;
    border-width : 0;
}

#__bs_notify__{display:none !important;}

/**
 * 页面默认宽高
 */
html, body {
    width: 100%;
    height: 100%;
    margin: 0px;
    padding: 0px;
}

/**
 * 顶级元素为body下面的第一级div， 所有元素都渲染在这个元素内
 * 这个元素默认属性：
 * 1. 高度100%
 * 2. flex为column
 */
body > div{
    display: -webkit-box!important;
    display: -webkit-flex!important;
    display: -ms-flexbox!important;
    display: flex!important;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    height: 100%;
    overflow-y: scroll;
}


/**
 * 对应react-native里边标记flex:*的父元素
 * 在web里边必须要标记父元素display:flex;才能使用flex属性
 * flex默认是column的
 */
.react-flex {
    display: -webkit-box!important;
    display: -webkit-flex!important;
    display: -ms-flexbox!important;
    display: flex!important;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
}

/**
 * flex direction 兼容
 */
.react-flex-column {
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
}

.react-flex-row {
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
    -webkit-flex-direction: row;
    -ms-flex-direction: row;
    flex-direction: row;
}

/**
 * justifyContent 兼容
 */
.react-flex.justify-start {
    -webkit-box-pack: start;
    -webkit-justify-content: flex-start;
    -ms-flex-pack: start;
    justify-content: flex-start
}
.react-flex.justify-end {
    -webkit-box-pack: end;
    -webkit-justify-content: flex-end;
    -ms-flex-pack: end;
    justify-content: flex-end
}
.react-flex.justify-center {
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center
}
.react-flex.justify-between {
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -ms-flex-pack: justify;
    justify-content: space-between
}
.react-flex.justify-around {
    -webkit-justify-content: space-around;
    -ms-flex-pack: distribute;
    justify-content: space-around
}

/**
 * align items的兼容
 */
.react-flex.align-start {
    -webkit-box-align: start;
    -webkit-align-items: flex-start;
    -ms-flex-align: start;
    align-items: flex-start
}
.react-flex.align-end {
    -webkit-box-align: end;
    -webkit-align-items: flex-end;
    -ms-flex-align: end;
    align-items: flex-end
}
.react-flex.align-center {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center
}
.react-flex.align-stretch {
    -webkit-box-align: stretch;
    -webkit-align-items: stretch;
    -ms-flex-align: stretch;
    align-items: stretch
}
.react-flex.align-stretch .react-flex-cell {
    height: auto!important
}


/**
 * 对应react-native里边标记有flex:*的元素
 */
.react-flex-cell {
    -webkit-flex-basis: 0;
    -ms-flex-preferred-size: 0;
    flex-basis: 0;
    max-width: 100%;
}

/**
 * alignself的兼容
 */
.react-flex-cell.align-start {
    -webkit-align-self: flex-start;
    -ms-flex-item-align: start;
    align-self: flex-start;
}
.react-flex-cell.align-end {
    -webkit-align-self: flex-end;
    -ms-flex-item-align: end;
    align-self: flex-end;
}
.react-flex-cell.align-center {
    -webkit-align-self: center;
    -ms-flex-item-align: center;
    align-self: center;
}
.react-flex-cell.align-stretch {
    -webkit-box-align: stretch;
    -webkit-align-items: stretch;
    -ms-flex-align: stretch;
    align-items: stretch;
    height: auto!important;
}


/**
 * scrollview 的兼容
 */
.scrollView {
    overflow-y: scroll;
}</style>
    <style type="text/css">
    body,ul,li,div,img{
        padding: 0;margin:0;
    }
    img{
        display: block;
    }
    body{
        position: absolute;
        width: 100%;
        height: 100%;
    }
     #J_Scroll{
        position: absolute;
        top:50px;
        bottom: 0;
        width:100%;
        overflow-x:hidden;
        overflow-y:auto;
        -webkit-overflow-scrolling:touch;
     }
    #J_Scroll ul{
        width: 100%;
    }
    #J_Scroll ul li.xs-row{
        width: 100%;
        display: block;
        height: 50px;
        overflow: hidden;
    }
    .xs-container{
        width: 100%;
    }

    #menu li{
        width: 10%;
        display: inline-block;
    }



    </style>
    <div id="menu">
        
        <ul>
            <li>0</li>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
        </ul>
    </div>
    <div id="J_Scroll">
        <div class="xs-container">
            <ul class="xs-content">
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

               <!--  <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>

                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li>
                <li class="xs-row">row</li> -->

            </ul>
        </div>
    </div>
    <script src="../../lib/sea.js"></script>
    <script src="../../lib/zepto.js"></script>
    <script>
   seajs.config({
      base: "../../build/cmd/",
      map: [
        [".js", ".js?" + new Date().getTime()]

        ]
    })
    seajs.use(["xscroll","plugins/infinite"],function(XScroll,Infinite){
        var infinites = window.infinites = {};
        var datas = window.datas = {};
        var xscroll = new XScroll({
            renderTo: "#J_Scroll"
        });
        xscroll.render();
       $("#menu li").click(function(){
        var self = this;
       render($(self).text())
           
       })
    render(0);


        function genData(index){
            var tpl = '<div>'+index+'</div>';
            var tmp = [];
            for (var i = 1; i < 500; i++) {
                tmp.push({
                    data:{num:tpl },
                    style:{height:100,background:"#fff","color":"#000"}
                });
            }

            return tmp
        }
        
        function render(index){
            console.log(index)
            xscroll.stop();
            if(xscroll.getPlugin('infinite')){
                var _inf = xscroll.getPlugin('infinite')


                // $(".xs-row").css({visibility:"hidden",background:"red"})
                // for(var i in _inf.infiniteElements){

                //     console.log(_inf.infiniteElements[i].style,index)
                //     if(_inf.infiniteElements[i].style){
                //         _inf.infiniteElements[i].style.visibility = "hidden";
                //     }
                // }
                xscroll.unplug('infinite');
            }

            if(xscroll && xscroll.renderTo){
                xscroll.get
            }

            if(!datas[index]){
                datas[index] = genData(index)
            }

            if(!infinites[index]){
                var infinite = infinites[index] = new Infinite({
                        transition:false,
                        infiniteElements:"#J_Scroll .xs-row",
                        renderHook:function(el,row){
                        el.innerHTML = row.data.num;
                    }
                });
            }

            var infinite = infinites[index];



            xscroll.plug(infinite);

            infinite.sections = {};

                infinite.append('0',datas[index]);


            xscroll.render();

            // infinite._initInfinite();




        }



    });

    </script>
</body>
</html>